# 컴퓨터 그래픽스 기초: 01 서론 (2023.05.17)
[Home](/)

[목차](/Notes/2023/05/Korean/FundamentalsOfComputerGraphics.md)

책에서는 **컴퓨터 그래픽스**란 컴퓨터를 사용하여 어떤 이미지를 생성하고 조작하는 모든 것을 의미한다고 한다. 하지만 필자의 경우 게임 개발자이므로 조금은 좁은 시선으로 이 책을 바라보려고 한다. 필자가 다루려는 부분들은 게임과 유관한 부분이기 때문에 시각화, 컴퓨터 비전, 2D 등은 다루지 않을 것이다.

컴퓨터 그래픽스를 실제로 다루기 위해서는 추가적인 지식이 필요하다:

* 하드웨어
* 파일 포맷
* 그래픽스 API

필자는 Windows OS, Ubuntu, Intel CPU, NVIDIA GPU의 환경에서 Direct3D 12와 Vulkan을 중심으로 이 책을 다루려고 한다. 이외의 환경은 따로 다루지 않을 것이나, 추후 추가될 수 있다(아마 Android OS, ARM CPU, Adreno GPU, iOS, Apple CPU/GPU).

## 1.1 그래픽스 분야

* **모델링**
* **렌더링**
* **애니메이션**

기타 다른 분야(UI, VR, 시각화, 영상 처리, 3D 스캐닝, computational photography 등)도 있지만, 게임 개발자의 시선으로 바라볼 것이니 양해를 구한다.

## 1.2. 주요 어플리케이션

**무조건 게임으로 설정할 것이다.**

## 1.3 그래픽스 API

* Direct3D
* Vulkan

언어는 C++20을 사용할 것이다. (C++23 추가 시 판단하여 올릴 수도 있음)

## 1.4 그래픽스 파이프라인

3D primitive(사실상 삼각형)를 효율적으로 그리기 위한 단계. 즉, 어떤 가상의 공간과 그 공간 위에 여러 오브젝트와 카메라가 주어 졌을 때, 이 카메라에서 이 공간을 바라보는 영상을 만들어 내는 방법으로 이해할 수 있다.

기본적으로 삼각형을 이루는 3D 공간에서의 정점을 2D 화면(모니터)으로 옮겨주고, 그렇게 2D 화면에 매핑된 삼각형 내부를 shading해주어 사실적인 이미지를 만들어 내고, 혹여나 2D 화면으로 매핑하면서 겹치는 삼각형이 생겼을 시 카메라 가까운 것부터 보이도록 순서대로 잘 그려주는 역할을 담당한다.

마지막에 언급한 순서가 매우 중요한데, 3D 공간에서야 카메라와 나머지 물건들 간의 공간적인 정보가 있으니 누가 누구보다 더 앞에 있는지가 명백해진다. 그러나 결과적으로 사진을 찍으려면 이를 센서라는 2D 화면에 매핑을 해줘야 한다. 3D 공간 상의 오브젝트들을 2D 화면에 직교 투영을 하다보면 순서가 매우 중요하지게 된다. 예를 들어 카메라를 기준으로 두 오브젝트 A, B가 서로 겹치는데, A가 B보다 더 앞에 있다고 가정해보자. 만약 2D 화면으로 투영을 해줄 때 A를 먼저 투영하고 B를 투영하게 되면 B가 A를 가리는 사진이 나오게 될 것이다. 하지만 A는 B보다 앞에 있는 오브젝트이므로 이런 일이 발생해서는 안된다!! 그렇기에 순서가 매우 중요해진다.

이 순서를 해결하기 위해 그릴 오브젝트들을 카메라로부터의 거리(깊이depth라고 부른다. 또한 카메라를 기준으로 좌우로 x축, 위아래로 y축, 앞뒤로 z축이라고 가정하면 z 값에 따라 순서가 달라지므로 depth 값을 z 값이라고도 한다.)에 따라 정렬하는 방법이 사용되어 왔었다. 근데 오히려 현재 업계에서 기본 중에 기본으로 사용하는 방법은 우아한 알고리듬을 사용하는 방법이 아닌, 단순히 모든 오브젝트의 z 값을 버퍼에 저장해주는 z-buffer 방법을 사용한다. B 오브젝트를 먼저 그릴 때, 따로 z 버퍼에 해당 오브젝트의 깊이를 기록해두는 것이다. 나중에 A 오브젝트를 그릴 때 A의 깊이는 B보다는 덜 깊을테니, 이미 투영시킨 B의 정보를 A의 투영된 정보로 덮어 씌우는 것이다!!

<div style='position:relative; padding-bottom:calc(56.00% + 44px)'><iframe src='https://gfycat.com/ifr/ContentSkinnyIcelandichorse' frameborder='0' scrolling='no' width='100%' height='100%' style='position:absolute;top:0;left:0;' allowfullscreen></iframe></div><p> <a href="https://gfycat.com/contentskinnyicelandichorse">via Gfycat</a></p>

3D 공간에 있는 오브젝트를 2D 공간으로 투영을 하겠다는 것은 곧 3D 공간의 한 정점을 2D 공간에 투영을 하겠다는 것이다. 즉, 수학적으로 바라보자면 벡터와 행렬이 등장할 수 밖에 없는 구조이다. 이때 실제 위치를 의미하는 벡터와 방향을 의미하는 벡터를 구분하기 위해 추가적인 4차원 원소를 추가해주어 4D 좌표를 사용하도록 한다. 이걸 