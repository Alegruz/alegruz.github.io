# 실시간 광선 추적법 공부 노트 (2022.04.03)
[Home](../README.md)

이 노트는 Real-Time Rendering 책을 읽고 한국어로 정리한 책입니다.

# 실시간 광선 추적법

래스터화와는 다르게 *광선 추적법ray tracing*은 좀 더 빛의 물리학에 입각한 방법임. 그렇기에 좀 더 현실적인 이미지를 얻을 수 있음.

래스터화와 광선 추적법은 결국 간단하게 보면 이중 `for`문임. 래스터화는:

```
for (T in triangles)
    for (P in pixels)
        determine if P is inside T
```

광선 추적법은:

```
for (P in pixels)
    for (T in triangles)
        determine if ray through P hits T
```

결국 알고리듬 자체는 단순함. 하지만 이걸 빠르게 수행하려면 소프트웨어와 하드웨어 둘 다 좀 노력해야함. 광선 추적기의 중요 기능 중 하나는 바로 공간 자료구조로, 대표적으로 바운딩 볼륨 계층(BVH)이 있음. 이걸 사용하면 광선 추적법 알고리듬이 O(log n)으로 축소가 됨(n은 장면 안의 삼각형의 개수). 근데 GPU가 어클루전 컬링 하드웨어가 있고, 렌더링 엔진에서는 프러스텀 컬링, 디퍼드 셰이딩 등의 기술을 사용하기에 사실상 래스터화는 O(n)보다 빠르게 돌음. 워낙 다양한 요소들 때문에 래스터화를 O() 표기법으로 표현하는 건 좀 무리가 있음.

래스터화와 광선 추적법의 중요한 차이점이라면, 광선 추적법은 어느 방향이든지 광선을 쏠 수 있다는 것임. 그렇기 때문에 재귀적으로 반사나 굴절을 렌더링해줄 수 있으며, 렌더링 방정식을 완전히 사용해줄 수 있음. 하지만 노이즈라는 단점이 있음. 영역광을 샘플링하거나, 표면이 매끈할 때, 혹은 환경 맵을 사용할 때, 그리고 경로 추적법을 사용할 때 등등의 상황에서 노이즈가 발생하는 편임.

그러므로 실시간 광선 추적법을 대세로 만드려면 결국엔 디노이징과 같은 추가적인 기술을 사용할 수 밖에 없음. 일단 당장은 래스터화와 광선 추적법을 섞어서 사용하는 것이 일반적일 것임. 장기적으로는 하드웨어에 발전에 따라 달라질 것임.

## 광선 추적법 기초

## 광선 추적법 셰이딩

## 상하위 단계 가속화 구조

## 간섭성

## 디노이징

## 텍스처 필터링

## 예상